WindowManager:
    Start_Window:
    Window_DateInfo:
    Window_SortDate:
    Window_LocationInfo:
    Window_SearchInfo:
    My_Filechooser:


<Start_Window>:
    name: "start"
    
    GridLayout:
        rows: 4
        size: root.width, root.height
        padding: [150, 40]
        spacing: [25,25]
        
        Label:
            text: "Decide how you like to sort your fotos:"
            color: [0,0,0,0.9]
        
        RoundedButton:
            text:"sort photos by date"
            back_color: (0.157, 0.455, 0.753, 1.0)
            on_release:
                app.root.current = "dateinfo"
                root.manager.transition.direction = "left"
        RoundedButton:
            text:"sort photo by location"
            back_color: (0.157, 0.455, 0.753, 1.0)
            on_release:
                app.root.current = "locationinfo"
                root.manager.transition.direction = "left"

        RoundedButton:
            text:"search for specific date"
            back_color: (0.157, 0.455, 0.753, 1.0)
            on_release:
                app.root.current = "searchinfo"
                root.manager.transition.direction = "left"
            

            
            
<Window_DateInfo>:
    name: "dateinfo"
   
    GridLayout:
        rows: 2 
        size: root.width, root.height
        padding: [50, 50]
        spacing: [20,20]
        
        GridLayout:
            cols: 3
            size: root.width, root.height
            padding: [30, 30]
            spacing: [20,20]
            
            Label:
                text: "Which photos do \n you like to sort?"
                color: [0,0,0,1]
              
            Button:
                text: "Choose Folder"
                back_color: (108/255, 122/255, 137/255, 1)
                on_release:
                    root.set_pathtype("origin")
                    app.root.current = "my_filechooser"
                    root.manager.transition.direction = "left"
                    
            Label: 
                id: l_date_origin_filepath
                color: [0,0,0,1]
                text: "(path to folder)"
                text_size: self.size
                halign: 'right'
                valign: 'middle'
                shorten: True
                
            Label:
                text: "Where do you want \n to store the photos?"
                color: [0,0,0,1]
            Button:
                text: "Choose Folder"
                back_color: (108/255, 122/255, 137/255, 1)
                on_release:
                    root.set_pathtype("destination")
                    app.root.current = "my_filechooser"
                    root.manager.transition.direction = "left"
                
            Label: 
                id: l_date_dest_filepath
                color: [0,0,0,1]
                text: "(path to folder)"
                text_size: self.size
                halign: 'right'
                valign: 'middle'
                shorten: True
     

        GridLayout:
        
            cols: 2
            padding: [40, 40]
            spacing: [20,20]
            row_default_height: "50dp"
            row_force_default: True
            size_hint_y: None
            height: self.minimum_height
            
            RoundedButton:
                text: "sort photos"
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release:
                    root.date_startparse()
                    app.root.current = "sortdate"
                    root.manager.transition.direction = "left"    
            RoundedButton:
                text: "Go Back"
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release:
                    root.reset_count()
                    app.root.current = "start"
                    root.manager.transition.direction = "right"
        
        
        
        
        
        
<Window_SortDate>:
    name: "sortdate"
    GridLayout:
        rows: 2
        size: root.width, root.height
        padding: [20, 20]
        spacing: [20,20]

        GridLayout:
            cols: 2
            size: root.width, root.height
            padding: [30, 30]
            spacing: [20,20]
            Label:
                text: "Images found:"
                color: [0,0,0,1]                    
            Label: 
                id: l_date_num_images
                color: [0,0,0,1]
                text : ""
                
            Label:
                text: "Images without exact date:"
                color: [0,0,0,1]
            Label: 
                id: l_date_num_noexif
                color: [0,0,0,1]
                text: ""
    
            Label:
                text: "Videos found:"
                color: [0,0,0,1]
            Label: 
                id: l_date_num_videos
                color: [0,0,0,1]
                text: ""
    
            Label:
                text: "memory in MB:"
                color: [0,0,0,1]
            Label: 
                id: l_date_num_memory
                color: [0,0,0,1]
                text: ""              
    
        GridLayout:
            cols: 2
            padding: [40, 40]
            spacing: [20,20]
            row_default_height: "50dp"
            row_force_default: True
            size_hint_y: None
            height: self.minimum_height
            
            RoundedButton:
                text: "sort photos"
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release:
                    root.date_startsort()
                    app.root.current = "start"
                    root.manager.transition.direction = "left"    

            RoundedButton:
                text: "Go Back"
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release:
                    app.root.current = "start"
                    root.manager.transition.direction = "right"
                
                
                
                

        
<Window_LocationInfo>:
    name: "locationinfo"

    Button:
        text: "Go Back"
        on_release:
            app.root.current = "start"
            root.manager.transition.direction = "right"
        
        
<Window_SearchInfo>:
    name: "searchinfo"

    Button:
        text: "Go Back"
        on_release:
            app.root.current = "start"
            root.manager.transition.direction = "right"        

         
<RoundedButton@Button>:
    background_color: (0,0,0,0)
    background_normal: ''
    back_color: (1,0,1,1)
    border_radius: [23]
    canvas.before:
        Color:
            rgba: self.back_color
        RoundedRectangle:
            size:self.size
            pos: self.pos
            radius: self.border_radius
            
            
            
            
<My_Filechooser>:
    id: my_filechooser
    canvas.before:
        Color:
            rgb: 112/255, 128/255, 144/255
        Rectangle:
            pos: self.pos
            size: self.size
    GridLayout:
        rows: 2
        size: root.width, root.height
        padding: [20, 20]
        spacing: [20,20]
        color: (.5, .4, .5, 1)
        
        
        FileChooserIconView:
            id: filechooser
            dirselect: True
            on_selection: my_filechooser.selected(filechooser.path)
        
        GridLayout:
            cols: 2
            padding: [40, 40]
            spacing: [20,20]
            row_default_height: "50dp"
            row_force_default: True
            size_hint_y: None
            height: self.minimum_height
            
            RoundedButton:
                back_color: (0.157, 0.455, 0.753, 1.0)
                text: "open"
                on_release: 
                    my_filechooser.open(filechooser.path)
                    app.root.current = "dateinfo"
                    root.manager.transition.direction = "right"

            RoundedButton:
                text: "Go Back"
                back_color: (0.157, 0.455, 0.753, 1.0)
                on_release:
                    app.root.current = "dateinfo"
                    root.manager.transition.direction = "right"



            